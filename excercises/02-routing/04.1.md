---
time: 10 min
---

# Guards / canDeactivate

- Create a guard function: ng generate guard book/confirm-leave.
- Use window.confirm to ask the user if he really want to leave the page.
- Open book.routes.ts.
- Add the guard to the route detail/:isbn (component: BookDetailComponent).


## Hints

<details>
<summary>Tips </summary>

**Guard Function**
```ts
import { CanDeactivateFn } from '@angular/router';

export const confirmLeaveGuardFn: CanDeactivateFn<MyComponent> = (component, route, state) => {
  // ...
};
```

**Add Guard to Route**
```ts
{
  path: ...,
  component: ...,
  canDeactivate: [confirmLeaveGuardFn]
}
```
</details>